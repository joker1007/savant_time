= paginate @entries
= form_tag bulk_create_archive_jobs_path, remote: true, id: "bulk-archive-form" do
  = link_to "Get Inventory", inventory_jobs_path, remote: true, method: :post, class: [:btn, "js-retrieve-inventory"]
  = submit_tag("Bulk Archive", class: [:btn])
  = button_tag("All Check", class: [:btn, "btn-primary", "js-all-check"])
  = button_tag("Clear", type: "reset", class: [:btn, "js-all-uncheck"])
  %table.table
    %thead
      %tr
        %th.target-check
        %th.entry_name
          name
        %th.size
          filesize
        %th.action
    %tbody
      - if current_path.present?
        %tr
          %td.target-check
          %td.entry_name= link_to "..", parent_path(current_path)
          %td.size
          %td.action

      - @entries.each do |entry|
        - if archive_job = @loaded_archive_jobs[entry.fullpath]
          - if archive = @loaded_archives[archive_job.first.jid]
            = render "archived_entry", entry: entry, archive: archive.first
          - else
            = render "archive_jobed_entry", entry: entry
        - else
          = render "entry", entry: entry
= paginate @entries
